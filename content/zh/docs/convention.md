
---
weight: 201
bookCollapseSection: false
bookFlatSection: true
title: "reL4 ç¼–ç¨‹å…¬çº¦è‰æ¡ˆ"
---

# reL4 ç¼–ç¨‹å…¬çº¦è‰æ¡ˆ

## ğŸ§­ å‘½åè§„èŒƒï¼ˆNaming Conventionsï¼‰

| ç±»å‹                | å‘½åé£æ ¼               | ç¤ºä¾‹                     |
| ------------------- | ---------------------- | ------------------------ |
| å˜é‡ / å‡½æ•°         | `snake_case`           | `calculate_sum`          |
| å¸¸é‡ / é™æ€å˜é‡     | `SCREAMING_SNAKE_CASE` | `MAX_BUFFER_SIZE`        |
| ç±»å‹ / æšä¸¾ / Trait | `CamelCase`            | `HttpRequest`, `Display` |
| ç”Ÿå‘½å‘¨æœŸæ ‡è¯†ç¬¦      | `'lowercase`           | `'a`, `'static`          |
| æ¨¡å—å              | `snake_case`           | `utils`, `io_helper`     |
| Feature             | `snake_case`           | `smp`, `mcs`, `have_cpu` |

---

## ğŸ§¼ ä»£ç é£æ ¼ï¼ˆCode Styleï¼‰

- æ¯è¡Œä¸è¶…è¿‡ **100 å­—ç¬¦**
- ä½¿ç”¨ `rustfmt` æ ¼å¼åŒ–ä»£ç ï¼š
```sh
  rustup component add rustfmt
  cargo fmt
```

## ğŸ” é”™è¯¯å¤„ç† (Error Handling)

- ä½¿ç”¨ Result<T, E> å¤„ç†å¯é¢„æœŸé”™è¯¯
- ä½¿ç”¨ ? æ“ä½œç¬¦ä¼ æ’­é”™è¯¯
- é¿å…ä½¿ç”¨ unwrap() / expect()ï¼Œé™¤éç¡®å®šæ— è¯¯

## ğŸ“¦ æ¨¡å—ä¸ Crate ç»“æ„ï¼ˆProject Structureï¼‰

- ä½¿ç”¨ `workspace` æ‹†åˆ†å¤§å‹é¡¹ç›®
- æ¯ä¸ªæ¨¡å—èŒè´£å•ä¸€ï¼Œé¿å…å¾ªç¯ä¾èµ–
- `lib.rs` åªä½œä¸ºå…¥å£ï¼Œä¸æ‰¿è½½ä¸šåŠ¡é€»è¾‘ï¼Œ`main.rs` ä¸­ç›¸å…³é€»è¾‘

## ğŸ§° å·¥å…·å»ºè®®ï¼ˆToolingï¼‰

- `rustfmt`	è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç 
- `clippy`	é™æ€åˆ†æå’Œæ½œåœ¨é”™è¯¯æç¤º

## ğŸ“ æ–‡æ¡£è§„èŒƒï¼ˆDocumentationï¼‰

- ä½¿ç”¨ /// æ³¨é‡Š public API
- ä½¿ç”¨ //! æ³¨é‡Š crate æˆ–æ¨¡å—å…¥å£
- æ·»åŠ  # Examplesï¼Œè‡ªåŠ¨ä½œä¸ºæµ‹è¯•ç”¨ä¾‹

```
/// è·å–ä¸¤ä¸ªæ•°å­—ä¹‹å’Œ
///
/// # Examples
///
/// ```
/// assert_eq!(my_crate::add(2, 3), 5);
/// ```
pub fn add(a: i32, b: i32) -> i32 {
    a + b
}
```

## é€‚å½“ä½¿ç”¨æŠ½è±¡

> è‰æ¡ˆ

- å¯¹äºä¸éœ€è¦åŠ é”çš„åœºæ™¯é€‚å½“ä½¿ç”¨æŠ½è±¡ï¼Œä¾‹å¦‚å¯åŠ¨æ ¸ä¸“å±çš„å˜é‡ï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸€ä¸ª struct æ¥å®šä¹‰, e.g. `BootCore<usize>`
- å¯¹äº `unsafe` ä»£ç è¿›è¡Œæ”¶é›†ï¼Œå‡å°‘ `unsafe` ä»£ç çš„åˆ†å¸ƒ
- å‡å°‘ç›´æ¥æŒ‡é’ˆçš„ä½¿ç”¨ï¼Œä½¿ç”¨ä¸€ä¸ªç±»å‹æˆ–è€…æŠ½è±¡è¿›è¡Œè®¡ç®—
- ä½¿ç”¨ `cargo clippy` æ£€æµ‹è¯­æ³•çš„å¼‚å¸¸
- å¯¹äºç¡®è®¤æ— è¯¯çš„ä»£ç ï¼Œåœ¨ mod æˆ– crate ä¸ŠåŠ å…¥ `#[deny(warnings)]` å’Œ `#[deny(missing_cos)]`ï¼Œç¡®ä¿åç»­ä»£ç ä¸å‡ºç°é—®é¢˜
